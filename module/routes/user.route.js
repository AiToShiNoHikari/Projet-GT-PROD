const e=require("express"),s=require("../database/index.model"),{uuid:r}=require("uuidv4"),t=require("../function/pwGestion.fn"),i=require("../function/rigthGestion.fn");let u=e.Router();u.post("/",i.filter("createUser"),(function(e,u){let o={idUser:r(),userLastName:e.body.userLastName,userFirstName:e.body.userFirstName,userLogin:e.body.userLogin,userRight:0==e.token.indexOf("temp_")?i.rigth("admin"):e.body.userRight};o.userHash=t.fHashPW(e.body.userPassword,o),s.User.create(o).then(e=>{u.json({idUser:e.idUser,userLastName:e.userLastName,userFirstName:e.userFirstName,userLogin:e.userLogin,userRight:e.userRight})}).catch(e=>{u.status(400),u.json(e)})})),module.exports=u;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS9yb3V0ZXMvdXNlci5yb3V0ZS5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImRiIiwidXVpZCIsImxvUHdHZXN0aW9uIiwibG9SaWd0aEdlc3Rpb24iLCJsb1JvdXRlciIsIlJvdXRlciIsInBvc3QiLCJmaWx0ZXIiLCJyZXEiLCJyZXMiLCJsb1VzZXIiLCJpZFVzZXIiLCJ1c2VyTGFzdE5hbWUiLCJib2R5IiwidXNlckZpcnN0TmFtZSIsInVzZXJMb2dpbiIsInVzZXJSaWdodCIsInRva2VuIiwiaW5kZXhPZiIsInJpZ3RoIiwidXNlckhhc2giLCJmSGFzaFBXIiwidXNlclBhc3N3b3JkIiwiVXNlciIsImNyZWF0ZSIsInRoZW4iLCJwb1VzZXIiLCJqc29uIiwiY2F0Y2giLCJwYUVycm9yIiwic3RhdHVzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsRUFBVUMsUUFBUSxXQUNsQkMsRUFBS0QsUUFBUSw0QkFDYkUsS0FDSkEsR0FDRUYsUUFBUSxVQUVORyxFQUFjSCxRQUFRLDRCQUN0QkksRUFBaUJKLFFBQVEsK0JBRS9CLElBQUlLLEVBQVdOLEVBQVFPLFNBRXZCRCxFQUFTRSxLQUFLLElBQUtILEVBQWVJLE9BQU8sZUFBZSxTQUFTQyxFQUFLQyxHQUVwRSxJQUFJQyxFQUFTLENBQ1hDLE9BQVFWLElBQ1JXLGFBQWNKLEVBQUlLLEtBQUtELGFBQ3ZCRSxjQUFlTixFQUFJSyxLQUFLQyxjQUN4QkMsVUFBV1AsRUFBSUssS0FBS0UsVUFDcEJDLFVBQXlDLEdBQTlCUixFQUFJUyxNQUFNQyxRQUFRLFNBQWdCZixFQUFlZ0IsTUFBTSxTQUFXWCxFQUFJSyxLQUFLRyxXQUd4Rk4sRUFBT1UsU0FBV2xCLEVBQVltQixRQUFRYixFQUFJSyxLQUFLUyxhQUFjWixHQUU3RFYsRUFBR3VCLEtBQUtDLE9BQU9kLEdBQ2RlLEtBQUtDLElBQ0pqQixFQUFJa0IsS0FBSyxDQUNQaEIsT0FBUWUsRUFBT2YsT0FDZkMsYUFBY2MsRUFBT2QsYUFDckJFLGNBQWVZLEVBQU9aLGNBQ3RCQyxVQUFXVyxFQUFPWCxVQUNsQkMsVUFBV1UsRUFBT1YsY0FHckJZLE1BQU1DLElBQ0xwQixFQUFJcUIsT0FBTyxLQUNYckIsRUFBSWtCLEtBQUtFLFFBS2JFLE9BQU9DLFFBQVU1QiIsImZpbGUiOiJtb2R1bGUvcm91dGVzL3VzZXIucm91dGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgZGIgPSByZXF1aXJlKCcuLi9kYXRhYmFzZS9pbmRleC5tb2RlbCcpO1xuY29uc3Qge1xuICB1dWlkXG59ID0gcmVxdWlyZSgndXVpZHY0Jyk7XG5cbmNvbnN0IGxvUHdHZXN0aW9uID0gcmVxdWlyZSgnLi4vZnVuY3Rpb24vcHdHZXN0aW9uLmZuJyk7XG5jb25zdCBsb1JpZ3RoR2VzdGlvbiA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9uL3JpZ3RoR2VzdGlvbi5mbicpO1xuXG5sZXQgbG9Sb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5sb1JvdXRlci5wb3N0KCcvJywgbG9SaWd0aEdlc3Rpb24uZmlsdGVyKCdjcmVhdGVVc2VyJyksIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG5cbiAgbGV0IGxvVXNlciA9IHtcbiAgICBpZFVzZXI6IHV1aWQoKSxcbiAgICB1c2VyTGFzdE5hbWU6IHJlcS5ib2R5LnVzZXJMYXN0TmFtZSxcbiAgICB1c2VyRmlyc3ROYW1lOiByZXEuYm9keS51c2VyRmlyc3ROYW1lLFxuICAgIHVzZXJMb2dpbjogcmVxLmJvZHkudXNlckxvZ2luLFxuICAgIHVzZXJSaWdodDogcmVxLnRva2VuLmluZGV4T2YoJ3RlbXBfJykgPT0gMCA/IGxvUmlndGhHZXN0aW9uLnJpZ3RoKCdhZG1pbicpIDogcmVxLmJvZHkudXNlclJpZ2h0LFxuICB9XG5cbiAgbG9Vc2VyLnVzZXJIYXNoID0gbG9Qd0dlc3Rpb24uZkhhc2hQVyhyZXEuYm9keS51c2VyUGFzc3dvcmQsIGxvVXNlcilcblxuICBkYi5Vc2VyLmNyZWF0ZShsb1VzZXIpXG4gIC50aGVuKHBvVXNlciA9PiB7XG4gICAgcmVzLmpzb24oe1xuICAgICAgaWRVc2VyOiBwb1VzZXIuaWRVc2VyLFxuICAgICAgdXNlckxhc3ROYW1lOiBwb1VzZXIudXNlckxhc3ROYW1lLFxuICAgICAgdXNlckZpcnN0TmFtZTogcG9Vc2VyLnVzZXJGaXJzdE5hbWUsXG4gICAgICB1c2VyTG9naW46IHBvVXNlci51c2VyTG9naW4sXG4gICAgICB1c2VyUmlnaHQ6IHBvVXNlci51c2VyUmlnaHQsXG4gICAgfSk7XG4gIH0pXG4gIC5jYXRjaChwYUVycm9yID0+IHtcbiAgICByZXMuc3RhdHVzKDQwMClcbiAgICByZXMuanNvbihwYUVycm9yKTtcbiAgfSlcblxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gbG9Sb3V0ZXJcbiJdfQ==
