const e=require("express"),t=require("../database/index.model"),i=require("../function/ticketFiltre.fn");let o=e.Router();o.get("/",(function(e,o){t.Ticket.findAll({include:["Responsible","Creator","Resolver"]}).then(e=>{e=e.map(i.ticketFiltre),o.json(e)}).catch(e=>{o.status(400),o.json(e)})})),o.get("/:idTicket",(function(e,o){t.Ticket.findOne({where:{idTicket:e.params.idTicket},include:["Responsible","Creator","Resolver",{model:t.History,include:[t.User]}]}).then(e=>{o.json(i.ticketFiltre(e))}).catch(e=>{o.status(400),o.json(e)})})),o.post("/",(function(e,o){console.log(e.body),t.Ticket.create({ticketCreation:e.body.ticketCreation,ticketDescription:e.body.ticketDescription,ticketHardware:e.body.ticketHardware,fkUserCreator:e.user.idUser,fkUserResponsible:e.body.fkUserResponsible}).then(s=>t.History.create({historyModif:e.body.ticketCreation,historyDescription:e.body.ticketDescription,fkUser:e.user.idUser,fkTicket:s.idTicket}).then(()=>t.Ticket.findOne({where:{idTicket:s.idTicket},include:["Responsible","Creator","Resolver",{model:t.History,include:[t.User]}]})).then(e=>{console.log(e),o.json(i.ticketFiltre(e))})).catch(e=>{o.status(400),o.json(e)})})),o.put("/:idTicket",(function(e,o){t.Ticket.findOne({where:{idTicket:e.params.idTicket}}).then(s=>{e.body.modifState=e.body.modifState?e.body.modifState:s.ticketState;let r=t.History.create({historyModif:e.body.modifDate,historyDescription:e.body.modifDescription,historyState:e.body.modifState,fkUser:e.user.idUser,fkTicket:e.params.idTicket});return s.ticketState!=e.body.modifState&&(r=r.then(()=>t.Ticket.update({ticketState:e.body.modifState},{where:{idTicket:e.params.idTicket}})),3==e.body.modifState&&(r=r.then(()=>t.Ticket.update({ticketResolve:e.body.modifDate,fkUserResolver:e.user.idUser},{where:{idTicket:e.params.idTicket}})))),r.then(()=>t.Ticket.findOne({where:{idTicket:e.params.idTicket},include:["Responsible","Creator","Resolver",{model:t.History,include:[t.User]}]})).then(e=>{o.json(i.ticketFiltre(e))})}).catch(e=>{o.status(400),o.json(e)})})),o.delete("/:idTicket",(function(e,i){t.Ticket.destroy({where:{idTicket:e.params.idTicket}}).then(e=>{e?i.status(204):i.status(404),i.json()}).catch(e=>{i.status(400),i.json(e)})})),module.exports=o;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS9yb3V0ZXMvdGlja2V0LnJvdXRlLmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwiZGIiLCJsb1RpY2tldEZpbHRyZSIsImxvUm91dGVyIiwiUm91dGVyIiwiZ2V0IiwicmVxIiwicmVzIiwiVGlja2V0IiwiZmluZEFsbCIsImluY2x1ZGUiLCJ0aGVuIiwicG9UaWNrZXRzIiwibWFwIiwidGlja2V0RmlsdHJlIiwianNvbiIsImNhdGNoIiwicGFFcnJvciIsInN0YXR1cyIsImZpbmRPbmUiLCJ3aGVyZSIsImlkVGlja2V0IiwicGFyYW1zIiwibW9kZWwiLCJIaXN0b3J5IiwiVXNlciIsInBvVGlja2V0IiwicG9zdCIsImNvbnNvbGUiLCJsb2ciLCJib2R5IiwiY3JlYXRlIiwidGlja2V0Q3JlYXRpb24iLCJ0aWNrZXREZXNjcmlwdGlvbiIsInRpY2tldEhhcmR3YXJlIiwiZmtVc2VyQ3JlYXRvciIsInVzZXIiLCJpZFVzZXIiLCJma1VzZXJSZXNwb25zaWJsZSIsInBvTmV3VGlja2V0IiwiaGlzdG9yeU1vZGlmIiwiaGlzdG9yeURlc2NyaXB0aW9uIiwiZmtVc2VyIiwiZmtUaWNrZXQiLCJwdXQiLCJtb2RpZlN0YXRlIiwidGlja2V0U3RhdGUiLCJsb1Byb21pc2UiLCJtb2RpZkRhdGUiLCJtb2RpZkRlc2NyaXB0aW9uIiwiaGlzdG9yeVN0YXRlIiwidXBkYXRlIiwidGlja2V0UmVzb2x2ZSIsImZrVXNlclJlc29sdmVyIiwiZGVsZXRlIiwiZGVzdHJveSIsInJlc3VsdCIsImVyciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLEVBQVVDLFFBQVEsV0FDbEJDLEVBQUtELFFBQVEsMkJBRWJFLEVBQWlCRixRQUFRLCtCQUUvQixJQUFJRyxFQUFXSixFQUFRSyxTQUV2QkQsRUFBU0UsSUFBSSxLQUFLLFNBQVNDLEVBQUtDLEdBQzlCTixFQUFHTyxPQUFPQyxRQUFRLENBQ2RDLFFBQVMsQ0FDUCxjQUNB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QSxXQUNBLENBQ0VhLE1BQU90QixFQUFHdUIsUUFDVmQsUUFBUyxDQUNQVCxFQUFHd0IsV0FJUGQsS0FBTWUsSUFDUm5CLEVBQUlRLEtBQUtiLEVBQWVZLGFBQWFZLFFBR3hDVixNQUFNQyxJQUNMVixFQUFJVyxPQUFPLEtBQ1hYLEVBQUlRLEtBQUtFLFFBSWZkLEVBQVNtRCxPQUFPLGNBQWMsU0FBU2hELEVBQUtDLEdBQzFDTixFQUFHTyxPQUFPK0MsUUFBUSxDQUNkbkMsTUFBTyxDQUNMQyxTQUFVZixFQUFJZ0IsT0FBT0QsWUFHeEJWLEtBQU02QyxJQUNEQSxFQUNGakQsRUFBSVcsT0FBTyxLQUVYWCxFQUFJVyxPQUFPLEtBRWJYLEVBQUlRLFNBRUxDLE1BQU95QyxJQUNObEQsRUFBSVcsT0FBTyxLQUNYWCxFQUFJUSxLQUFLMEMsUUFJZkMsT0FBT0MsUUFBVXhEIiwiZmlsZSI6Im1vZHVsZS9yb3V0ZXMvdGlja2V0LnJvdXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IGRiID0gcmVxdWlyZSgnLi4vZGF0YWJhc2UvaW5kZXgubW9kZWwnKTtcblxuY29uc3QgbG9UaWNrZXRGaWx0cmUgPSByZXF1aXJlKCcuLi9mdW5jdGlvbi90aWNrZXRGaWx0cmUuZm4nKTtcblxubGV0IGxvUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxubG9Sb3V0ZXIuZ2V0KCcvJywgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgZGIuVGlja2V0LmZpbmRBbGwoe1xuICAgICAgaW5jbHVkZTogW1xuICAgICAgICAnUmVzcG9uc2libGUnLFxuICAgICAgICAnQ3JlYXRvcicsXG4gICAgICAgICdSZXNvbHZlcidcbiAgICAgIF1cbiAgICB9KS50aGVuKChwb1RpY2tldHMpID0+IHtcbiAgICAgIHBvVGlja2V0cyA9IHBvVGlja2V0cy5tYXAobG9UaWNrZXRGaWx0cmUudGlja2V0RmlsdHJlKVxuICAgICAgcmVzLmpzb24ocG9UaWNrZXRzKTtcbiAgICB9KVxuICAgIC5jYXRjaChwYUVycm9yID0+IHtcbiAgICAgIHJlcy5zdGF0dXMoNDAwKVxuICAgICAgcmVzLmpzb24ocGFFcnJvcik7XG4gICAgfSlcbn0pO1xuXG5sb1JvdXRlci5nZXQoJy86aWRUaWNrZXQnLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICBkYi5UaWNrZXQuZmluZE9uZSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBpZFRpY2tldDogcmVxLnBhcmFtcy5pZFRpY2tldFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IFtcbiAgICAgICAgJ1Jlc3BvbnNpYmxlJyxcbiAgICAgICAgJ0NyZWF0b3InLFxuICAgICAgICAnUmVzb2x2ZXInLFxuICAgICAgICB7XG4gICAgICAgICAgbW9kZWw6IGRiLkhpc3RvcnksXG4gICAgICAgICAgaW5jbHVkZTogW1xuICAgICAgICAgICAgZGIuVXNlclxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pLnRoZW4oKHBvVGlja2V0KSA9PiB7XG4gICAgICByZXMuanNvbihsb1RpY2tldEZpbHRyZS50aWNrZXRGaWx0cmUocG9UaWNrZXQpKTtcbiAgICB9KVxuICAgIC5jYXRjaChwYUVycm9yID0+IHtcbiAgICAgIHJlcy5zdGF0dXMoNDAwKVxuICAgICAgcmVzLmpzb24ocGFFcnJvcik7XG4gICAgfSlcbn0pO1xuXG5sb1JvdXRlci5wb3N0KCcvJywgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgY29uc29sZS5sb2cocmVxLmJvZHkpO1xuICBkYi5UaWNrZXQuY3JlYXRlKHtcbiAgICAgIHRpY2tldENyZWF0aW9uOiByZXEuYm9keS50aWNrZXRDcmVhdGlvbixcbiAgICAgIHRpY2tldERlc2NyaXB0aW9uOiByZXEuYm9keS50aWNrZXREZXNjcmlwdGlvbixcbiAgICAgIHRpY2tldEhhcmR3YXJlOiByZXEuYm9keS50aWNrZXRIYXJkd2FyZSxcbiAgICAgIGZrVXNlckNyZWF0b3I6IHJlcS51c2VyLmlkVXNlcixcbiAgICAgIGZrVXNlclJlc3BvbnNpYmxlOiByZXEuYm9keS5ma1VzZXJSZXNwb25zaWJsZVxuICAgIH0pLnRoZW4oKHBvTmV3VGlja2V0KSA9PiB7XG4gICAgICByZXR1cm4gZGIuSGlzdG9yeS5jcmVhdGUoe1xuICAgICAgICAgIGhpc3RvcnlNb2RpZjogcmVxLmJvZHkudGlja2V0Q3JlYXRpb24sXG4gICAgICAgICAgaGlzdG9yeURlc2NyaXB0aW9uOiByZXEuYm9keS50aWNrZXREZXNjcmlwdGlvbixcbiAgICAgICAgICBma1VzZXI6IHJlcS51c2VyLmlkVXNlcixcbiAgICAgICAgICBma1RpY2tldDogcG9OZXdUaWNrZXQuaWRUaWNrZXRcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4gZGIuVGlja2V0LmZpbmRPbmUoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBpZFRpY2tldDogcG9OZXdUaWNrZXQuaWRUaWNrZXRcbiAgICAgICAgICB9LFxuICAgICAgICAgIGluY2x1ZGU6IFtcbiAgICAgICAgICAgICdSZXNwb25zaWJsZScsXG4gICAgICAgICAgICAnQ3JlYXRvcicsXG4gICAgICAgICAgICAnUmVzb2x2ZXInLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBtb2RlbDogZGIuSGlzdG9yeSxcbiAgICAgICAgICAgICAgaW5jbHVkZTogW1xuICAgICAgICAgICAgICAgIGRiLlVzZXJcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSkpLnRoZW4oKHBvVGlja2V0KSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2cocG9UaWNrZXQpO1xuICAgICAgICAgIHJlcy5qc29uKGxvVGlja2V0RmlsdHJlLnRpY2tldEZpbHRyZShwb1RpY2tldCkpO1xuICAgICAgICB9KVxuICAgIH0pXG4gICAgLmNhdGNoKHBhRXJyb3IgPT4ge1xuICAgICAgcmVzLnN0YXR1cyg0MDApXG4gICAgICByZXMuanNvbihwYUVycm9yKTtcbiAgICB9KVxuXG59KTtcblxubG9Sb3V0ZXIucHV0KCcvOmlkVGlja2V0JywgZnVuY3Rpb24ocmVxLCByZXMpIHtcblxuICBkYi5UaWNrZXQuZmluZE9uZSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBpZFRpY2tldDogcmVxLnBhcmFtcy5pZFRpY2tldFxuICAgICAgfVxuICAgIH0pLnRoZW4oKHBvVGlja2V0KSA9PiB7XG5cbiAgICAgIHJlcS5ib2R5Lm1vZGlmU3RhdGUgPSAhIXJlcS5ib2R5Lm1vZGlmU3RhdGUgPyByZXEuYm9keS5tb2RpZlN0YXRlIDogcG9UaWNrZXQudGlja2V0U3RhdGVcblxuICAgICAgbGV0IGxvUHJvbWlzZSA9IGRiLkhpc3RvcnkuY3JlYXRlKHtcbiAgICAgICAgaGlzdG9yeU1vZGlmOiByZXEuYm9keS5tb2RpZkRhdGUsXG4gICAgICAgIGhpc3RvcnlEZXNjcmlwdGlvbjogcmVxLmJvZHkubW9kaWZEZXNjcmlwdGlvbixcbiAgICAgICAgaGlzdG9yeVN0YXRlOiByZXEuYm9keS5tb2RpZlN0YXRlLFxuICAgICAgICBma1VzZXI6IHJlcS51c2VyLmlkVXNlcixcbiAgICAgICAgZmtUaWNrZXQ6IHJlcS5wYXJhbXMuaWRUaWNrZXRcbiAgICAgIH0pXG5cbiAgICAgIGlmIChwb1RpY2tldC50aWNrZXRTdGF0ZSAhPSByZXEuYm9keS5tb2RpZlN0YXRlKSB7XG4gICAgICAgIGxvUHJvbWlzZSA9IGxvUHJvbWlzZS50aGVuKCgpID0+IGRiLlRpY2tldC51cGRhdGUoe1xuICAgICAgICAgIHRpY2tldFN0YXRlOiByZXEuYm9keS5tb2RpZlN0YXRlXG4gICAgICAgIH0sIHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgaWRUaWNrZXQ6IHJlcS5wYXJhbXMuaWRUaWNrZXRcbiAgICAgICAgICB9XG4gICAgICAgIH0pKVxuXG4gICAgICAgIGlmIChyZXEuYm9keS5tb2RpZlN0YXRlID09IDMpIHtcbiAgICAgICAgICBsb1Byb21pc2UgPSBsb1Byb21pc2UudGhlbigoKSA9PiBkYi5UaWNrZXQudXBkYXRlKHtcbiAgICAgICAgICAgIHRpY2tldFJlc29sdmU6IHJlcS5ib2R5Lm1vZGlmRGF0ZSxcbiAgICAgICAgICAgIGZrVXNlclJlc29sdmVyOiByZXEudXNlci5pZFVzZXJcbiAgICAgICAgICB9LCB7XG4gICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICBpZFRpY2tldDogcmVxLnBhcmFtcy5pZFRpY2tldFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBsb1Byb21pc2UudGhlbigoKSA9PiBkYi5UaWNrZXQuZmluZE9uZSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgaWRUaWNrZXQ6IHJlcS5wYXJhbXMuaWRUaWNrZXRcbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZTogW1xuICAgICAgICAgICdSZXNwb25zaWJsZScsXG4gICAgICAgICAgJ0NyZWF0b3InLFxuICAgICAgICAgICdSZXNvbHZlcicsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbW9kZWw6IGRiLkhpc3RvcnksXG4gICAgICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICAgIGRiLlVzZXJcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pKS50aGVuKChwb1RpY2tldCkgPT4ge1xuICAgICAgICByZXMuanNvbihsb1RpY2tldEZpbHRyZS50aWNrZXRGaWx0cmUocG9UaWNrZXQpKTtcbiAgICAgIH0pO1xuICAgIH0pXG4gICAgLmNhdGNoKHBhRXJyb3IgPT4ge1xuICAgICAgcmVzLnN0YXR1cyg0MDApXG4gICAgICByZXMuanNvbihwYUVycm9yKTtcbiAgICB9KVxufSk7XG5cbmxvUm91dGVyLmRlbGV0ZSgnLzppZFRpY2tldCcsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gIGRiLlRpY2tldC5kZXN0cm95KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlkVGlja2V0OiByZXEucGFyYW1zLmlkVGlja2V0XG4gICAgICB9XG4gICAgfSlcbiAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBpZiAocmVzdWx0KVxuICAgICAgICByZXMuc3RhdHVzKDIwNClcbiAgICAgIGVsc2VcbiAgICAgICAgcmVzLnN0YXR1cyg0MDQpO1xuXG4gICAgICByZXMuanNvbigpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIHJlcy5zdGF0dXMoNDAwKTtcbiAgICAgIHJlcy5qc29uKGVycik7XG4gICAgfSk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBsb1JvdXRlclxuIl19
