const e=require("express"),t=require("../database/index.model"),i=require("../function/ticketFiltre.fn");let r=e.Router();r.get("/",(function(e,r){t.Ticket.findAll({include:["Responsible","Creator","Resolver"]}).then(e=>{e=e.map(i.ticketFiltre),r.json(e)}).catch(e=>{r.status(400),r.json(e)})})),r.get("/:idTicket",(function(e,r){t.Ticket.findOne({where:{idTicket:e.params.idTicket},include:["Responsible","Creator","Resolver",{model:t.History,include:[t.User]}]}).then(e=>{r.json(i.ticketFiltre(e))}).catch(e=>{r.status(400),r.json(e)})})),r.post("/",(function(e,r){t.Ticket.create({ticketCreation:e.body.ticketCreation,ticketDescription:e.body.ticketDescription,ticketHardware:e.body.ticketHardware,fkUserCreator:e.user.idUser}).then(o=>t.History.create({historyModif:e.body.ticketCreation,historyDescription:e.body.ticketDescription,fkUser:e.user.idUser,fkTicket:o.idTicket}).then(()=>t.Ticket.findOne({where:{idTicket:o.idTicket},include:["Responsible","Creator","Resolver",{model:t.History,include:[t.User]}]})).then(e=>{r.json(i.ticketFiltre(e))})).catch(e=>{r.status(400),r.json(e)})})),r.put("/:idTicket",(function(e,r){t.Ticket.findOne({where:{idTicket:e.params.idTicket}}).then(o=>{e.body.modifState=e.body.modifState?e.body.modifState:o.ticketState;let s=t.History.create({historyModif:e.body.modifDate,historyDescription:e.body.modifDescription,historyState:e.body.modifState,fkUser:e.user.idUser,fkTicket:e.params.idTicket});return o.ticketState!=e.body.modifState&&(s=s.then(()=>t.Ticket.update({ticketState:e.body.modifState},{where:{idTicket:e.params.idTicket}})),3==o.ticketState&&(s=s.then(()=>t.Ticket.update({ticketResolve:e.body.modifDate,fkUserResolver:e.user.idUser},{where:{idTicket:e.params.idTicket}})))),s.then(()=>t.Ticket.findOne({where:{idTicket:e.params.idTicket},include:["Responsible","Creator","Resolver",{model:t.History,include:[t.User]}]})).then(e=>{r.json(i.ticketFiltre(e))})}).catch(e=>{r.status(400),r.json(e)})})),r.delete("/:idTicket",(function(e,i){t.Ticket.destroy({where:{idTicket:e.params.idTicket}}).then(e=>{e?i.status(204):i.status(404),i.json()}).catch(e=>{i.status(400),i.json(e)})})),module.exports=r;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS9yb3V0ZXMvdGlja2V0LnJvdXRlLmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwiZGIiLCJsb1RpY2tldEZpbHRyZSIsImxvUm91dGVyIiwiUm91dGVyIiwiZ2V0IiwicmVxIiwicmVzIiwiVGlja2V0IiwiZmluZEFsbCIsImluY2x1ZGUiLCJ0aGVuIiwicG9UaWNrZXRzIiwibWFwIiwidGlja2V0RmlsdHJlIiwianNvbiIsImNhdGNoIiwicGFFcnJvciIsInN0YXR1cyIsImZpbmRPbmUiLCJ3aGVyZSIsImlkVGlja2V0IiwicGFyYW1zIiwibW9kZWwiLCJIaXN0b3J5IiwiVXNlciIsInBvVGlja2V0IiwicG9zdCIsImNyZWF0ZSIsInRpY2tldENyZWF0aW9uIiwiYm9keSIsInRpY2tldERlc2NyaXB0aW9uIiwidGlja2V0SGFyZHdhcmUiLCJma1VzZXJDcmVhdG9yIiwidXNlciIsImlkVXNlciIsInBvTmV3VGlja2V0IiwiaGlzdG9yeU1vZGlmIiwiaGlzdG9yeURlc2NyaXB0aW9uIiwiZmtVc2VyIiwiZmtUaWNrZXQiLCJwdXQiLCJtb2RpZlN0YXRlIiwidGlja2V0U3RhdGUiLCJsb1Byb21pc2UiLCJtb2RpZkRhdGUiLCJtb2RpZkRlc2NyaXB0aW9uIiwiaGlzdG9yeVN0YXRlIiwidXBkYXRlIiwidGlja2V0UmVzb2x2ZSIsImZrVXNlclJlc29sdmVyIiwiZGVsZXRlIiwiZGVzdHJveSIsInJlc3VsdCIsImVyciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLEVBQVVDLFFBQVEsV0FDbEJDLEVBQUtELFFBQVEsMkJBRWJFLEVBQWlCRixRQUFRLCtCQUUvQixJQUFJRyxFQUFXSixFQUFRSyxTQUV2QkQsRUFBU0UsSUFBSSxLQUFLLFNBQVNDLEVBQUtDLEdBQzlCTixFQUFHTyxPQUFPQyxRQUFRLENBQ2RDLFFBQVMsQ0FDUCxjQUNBLFVBQ0EsY0FFREMsS0FBTUMsSUFDUEEsRUFBWUEsRUFBVUMs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QUNYWCxFQUFJUSxLQUFLRSxRQWlCZmQsRUFBU2dELE9BQU8sY0FBYyxTQUFTN0MsRUFBS0MsR0FDMUNOLEVBQUdPLE9BQU80QyxRQUFRLENBQ2RoQyxNQUFPLENBQ0xDLFNBQVVmLEVBQUlnQixPQUFPRCxZQUd4QlYsS0FBTTBDLElBQ0RBLEVBQ0Y5QyxFQUFJVyxPQUFPLEtBRVhYLEVBQUlXLE9BQU8sS0FFYlgsRUFBSVEsU0FFTEMsTUFBT3NDLElBQ04vQyxFQUFJVyxPQUFPLEtBQ1hYLEVBQUlRLEtBQUt1QyxRQUlmQyxPQUFPQyxRQUFVckQiLCJmaWxlIjoibW9kdWxlL3JvdXRlcy90aWNrZXQucm91dGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgZGIgPSByZXF1aXJlKCcuLi9kYXRhYmFzZS9pbmRleC5tb2RlbCcpO1xuXG5jb25zdCBsb1RpY2tldEZpbHRyZSA9IHJlcXVpcmUoJy4uL2Z1bmN0aW9uL3RpY2tldEZpbHRyZS5mbicpO1xuXG5sZXQgbG9Sb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5sb1JvdXRlci5nZXQoJy8nLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICBkYi5UaWNrZXQuZmluZEFsbCh7XG4gICAgICBpbmNsdWRlOiBbXG4gICAgICAgICdSZXNwb25zaWJsZScsXG4gICAgICAgICdDcmVhdG9yJyxcbiAgICAgICAgJ1Jlc29sdmVyJ1xuICAgICAgXVxuICAgIH0pLnRoZW4oKHBvVGlja2V0cykgPT4ge1xuICAgICAgcG9UaWNrZXRzID0gcG9UaWNrZXRzLm1hcChsb1RpY2tldEZpbHRyZS50aWNrZXRGaWx0cmUpXG4gICAgICByZXMuanNvbihwb1RpY2tldHMpO1xuICAgIH0pXG4gICAgLmNhdGNoKHBhRXJyb3IgPT4ge1xuICAgICAgcmVzLnN0YXR1cyg0MDApXG4gICAgICByZXMuanNvbihwYUVycm9yKTtcbiAgICB9KVxufSk7XG5cbmxvUm91dGVyLmdldCgnLzppZFRpY2tldCcsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gIGRiLlRpY2tldC5maW5kT25lKHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlkVGlja2V0OiByZXEucGFyYW1zLmlkVGlja2V0XG4gICAgICB9LFxuICAgICAgaW5jbHVkZTogW1xuICAgICAgICAnUmVzcG9uc2libGUnLFxuICAgICAgICAnQ3JlYXRvcicsXG4gICAgICAgICdSZXNvbHZlcicsXG4gICAgICAgIHtcbiAgICAgICAgICBtb2RlbDogZGIuSGlzdG9yeSxcbiAgICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICBkYi5Vc2VyXG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSkudGhlbigocG9UaWNrZXQpID0+IHtcbiAgICAgIHJlcy5qc29uKGxvVGlja2V0RmlsdHJlLnRpY2tldEZpbHRyZShwb1RpY2tldCkpO1xuICAgIH0pXG4gICAgLmNhdGNoKHBhRXJyb3IgPT4ge1xuICAgICAgcmVzLnN0YXR1cyg0MDApXG4gICAgICByZXMuanNvbihwYUVycm9yKTtcbiAgICB9KVxufSk7XG5cbmxvUm91dGVyLnBvc3QoJy8nLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICBkYi5UaWNrZXQuY3JlYXRlKHtcbiAgICAgIHRpY2tldENyZWF0aW9uOiByZXEuYm9keS50aWNrZXRDcmVhdGlvbixcbiAgICAgIHRpY2tldERlc2NyaXB0aW9uOiByZXEuYm9keS50aWNrZXREZXNjcmlwdGlvbixcbiAgICAgIHRpY2tldEhhcmR3YXJlOiByZXEuYm9keS50aWNrZXRIYXJkd2FyZSxcbiAgICAgIGZrVXNlckNyZWF0b3I6IHJlcS51c2VyLmlkVXNlclxuICAgIH0pLnRoZW4oKHBvTmV3VGlja2V0KSA9PiB7XG4gICAgICByZXR1cm4gZGIuSGlzdG9yeS5jcmVhdGUoe1xuICAgICAgICAgIGhpc3RvcnlNb2RpZjogcmVxLmJvZHkudGlja2V0Q3JlYXRpb24sXG4gICAgICAgICAgaGlzdG9yeURlc2NyaXB0aW9uOiByZXEuYm9keS50aWNrZXREZXNjcmlwdGlvbixcbiAgICAgICAgICBma1VzZXI6IHJlcS51c2VyLmlkVXNlcixcbiAgICAgICAgICBma1RpY2tldDogcG9OZXdUaWNrZXQuaWRUaWNrZXRcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4gZGIuVGlja2V0LmZpbmRPbmUoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBpZFRpY2tldDogcG9OZXdUaWNrZXQuaWRUaWNrZXRcbiAgICAgICAgICB9LFxuICAgICAgICAgIGluY2x1ZGU6IFtcbiAgICAgICAgICAgICdSZXNwb25zaWJsZScsXG4gICAgICAgICAgICAnQ3JlYXRvcicsXG4gICAgICAgICAgICAnUmVzb2x2ZXInLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBtb2RlbDogZGIuSGlzdG9yeSxcbiAgICAgICAgICAgICAgaW5jbHVkZTogW1xuICAgICAgICAgICAgICAgIGRiLlVzZXJcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSkpLnRoZW4oKHBvVGlja2V0KSA9PiB7XG4gICAgICAgICAgcmVzLmpzb24obG9UaWNrZXRGaWx0cmUudGlja2V0RmlsdHJlKHBvVGlja2V0KSk7XG4gICAgICAgIH0pXG4gICAgfSlcbiAgICAuY2F0Y2gocGFFcnJvciA9PiB7XG4gICAgICByZXMuc3RhdHVzKDQwMClcbiAgICAgIHJlcy5qc29uKHBhRXJyb3IpO1xuICAgIH0pXG5cbn0pO1xuXG5sb1JvdXRlci5wdXQoJy86aWRUaWNrZXQnLCBmdW5jdGlvbihyZXEsIHJlcykge1xuXG4gIGRiLlRpY2tldC5maW5kT25lKHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlkVGlja2V0OiByZXEucGFyYW1zLmlkVGlja2V0XG4gICAgICB9XG4gICAgfSkudGhlbigocG9UaWNrZXQpID0+IHtcblxuICAgICAgcmVxLmJvZHkubW9kaWZTdGF0ZSA9ICEhcmVxLmJvZHkubW9kaWZTdGF0ZSA/IHJlcS5ib2R5Lm1vZGlmU3RhdGUgOiBwb1RpY2tldC50aWNrZXRTdGF0ZVxuXG4gICAgICBsZXQgbG9Qcm9taXNlID0gZGIuSGlzdG9yeS5jcmVhdGUoe1xuICAgICAgICBoaXN0b3J5TW9kaWY6IHJlcS5ib2R5Lm1vZGlmRGF0ZSxcbiAgICAgICAgaGlzdG9yeURlc2NyaXB0aW9uOiByZXEuYm9keS5tb2RpZkRlc2NyaXB0aW9uLFxuICAgICAgICBoaXN0b3J5U3RhdGU6IHJlcS5ib2R5Lm1vZGlmU3RhdGUsXG4gICAgICAgIGZrVXNlcjogcmVxLnVzZXIuaWRVc2VyLFxuICAgICAgICBma1RpY2tldDogcmVxLnBhcmFtcy5pZFRpY2tldFxuICAgICAgfSlcblxuICAgICAgaWYgKHBvVGlja2V0LnRpY2tldFN0YXRlICE9IHJlcS5ib2R5Lm1vZGlmU3RhdGUpIHtcbiAgICAgICAgbG9Qcm9taXNlID0gbG9Qcm9taXNlLnRoZW4oKCkgPT4gZGIuVGlja2V0LnVwZGF0ZSh7XG4gICAgICAgICAgdGlja2V0U3RhdGU6IHJlcS5ib2R5Lm1vZGlmU3RhdGVcbiAgICAgICAgfSwge1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBpZFRpY2tldDogcmVxLnBhcmFtcy5pZFRpY2tldFxuICAgICAgICAgIH1cbiAgICAgICAgfSkpXG5cbiAgICAgICAgaWYgKHBvVGlja2V0LnRpY2tldFN0YXRlID09IDMpIHtcbiAgICAgICAgICBsb1Byb21pc2UgPSBsb1Byb21pc2UudGhlbigoKSA9PiBkYi5UaWNrZXQudXBkYXRlKHtcbiAgICAgICAgICAgIHRpY2tldFJlc29sdmU6IHJlcS5ib2R5Lm1vZGlmRGF0ZSxcbiAgICAgICAgICAgIGZrVXNlclJlc29sdmVyOiByZXEudXNlci5pZFVzZXJcbiAgICAgICAgICB9LCB7XG4gICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICBpZFRpY2tldDogcmVxLnBhcmFtcy5pZFRpY2tldFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBsb1Byb21pc2UudGhlbigoKSA9PiBkYi5UaWNrZXQuZmluZE9uZSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgaWRUaWNrZXQ6IHJlcS5wYXJhbXMuaWRUaWNrZXRcbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZTogW1xuICAgICAgICAgICdSZXNwb25zaWJsZScsXG4gICAgICAgICAgJ0NyZWF0b3InLFxuICAgICAgICAgICdSZXNvbHZlcicsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbW9kZWw6IGRiLkhpc3RvcnksXG4gICAgICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgICAgIGRiLlVzZXJcbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pKS50aGVuKChwb1RpY2tldCkgPT4ge1xuICAgICAgICByZXMuanNvbihsb1RpY2tldEZpbHRyZS50aWNrZXRGaWx0cmUocG9UaWNrZXQpKTtcbiAgICAgIH0pO1xuICAgIH0pXG4gICAgLmNhdGNoKHBhRXJyb3IgPT4ge1xuICAgICAgcmVzLnN0YXR1cyg0MDApXG4gICAgICByZXMuanNvbihwYUVycm9yKTtcbiAgICB9KVxuXG5cblxuICAvKmRiLlRpY2tldC51cGRhdGUoe1xuICAgICAgaWRUaWNrZXQ6IHBvVGlja2V0LmlkVGlja2V0LFxuICAgICAgdGlja2V0UmVzb2x2ZTogcG9UaWNrZXQudGlja2V0UmVzb2x2ZSxcbiAgICAgIHRpY2tldERlc2NyaXB0aW9uOiBwb1RpY2tldC50aWNrZXREZXNjcmlwdGlvbixcbiAgICAgIHRpY2tldFN0YXRlOiBwb1RpY2tldC50aWNrZXRTdGF0ZSxcbiAgICB9KVxuICAgIC50aGVuKChwb1RpY2tldCkgPT4ge1xuICAgICAgcmVzLmpzb24oe1xuICAgICAgfSk7XG4gICAgfSk7Ki9cbn0pO1xuXG5sb1JvdXRlci5kZWxldGUoJy86aWRUaWNrZXQnLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICBkYi5UaWNrZXQuZGVzdHJveSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBpZFRpY2tldDogcmVxLnBhcmFtcy5pZFRpY2tldFxuICAgICAgfVxuICAgIH0pXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgaWYgKHJlc3VsdClcbiAgICAgICAgcmVzLnN0YXR1cygyMDQpXG4gICAgICBlbHNlXG4gICAgICAgIHJlcy5zdGF0dXMoNDA0KTtcblxuICAgICAgcmVzLmpzb24oKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICByZXMuc3RhdHVzKDQwMCk7XG4gICAgICByZXMuanNvbihlcnIpO1xuICAgIH0pO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gbG9Sb3V0ZXJcbiJdfQ==
